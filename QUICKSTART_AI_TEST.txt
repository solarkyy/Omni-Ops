# QUICK START - AI ACTIVATION TEST

## TL;DR - Start Here

### The Problem
"AIPlayerAPI not available!" error prevented AI from being activated.

### The Fix Applied
âœ… Enhanced AI waiting mechanism  
âœ… Automatic retry with user feedback  
âœ… Better error messages and diagnostics  

### Test It Now - 3 Options

---

## Option 1: Fastest Test (2 minutes) âš¡

```bash
# Open test interface
# file:///c:/Users/kjoly/OneDrive/Desktop/Omni%20Ops/test_ai_browser.html

# In browser:
# 1. Open index.html in another tab
# 2. Wait for game to load (see loading bar)
# 3. Start a game (Click "Quick Play")
# 4. Return to test window
# 5. Click "Check API Status"
# 6. Click "Activate AI"
# 7. Click "Forward" - watch player move
```

âœ… If you see:
- Green "âœ“ API Available" 
- Green "ðŸ¤– AI ACTIVE"
- Player moves forward

**â†’ AI System is Fixed!**

---

## Option 2: Guided Test (5 minutes) ðŸŽ¯

```bash
python run_ai_test.py
```

Follows you through the whole process with yes/no prompts.

---

## Option 3: Browser Console (2 minutes) ðŸ’»

```javascript
// In game window, press F12, paste these:

// Step 1: Check if API is ready
window.AIPlayerAPI ? console.log('âœ“ API Ready') : console.log('âœ— API Not Ready');

// Step 2: If ready, activate AI
window.AIPlayerAPI.activateAI();
console.log('AI Active:', window.AIPlayerAPI.isAIControlling());

// Step 3: Test movement
window.AIPlayerAPI.setInput('moveForward', true);
setTimeout(() => window.AIPlayerAPI.setInput('moveForward', false), 500);

// Step 4: Check game state
console.log('Game Running:', window.AIPlayerAPI.getGameState() !== null);
```

---

## What to Expect

| Step | Before Fix | After Fix |
|------|-----------|-----------|
| Click Activate AI | âŒ Alert: "API not available" | âœ… Status shows green "ACTIVE" |
| Send Command | âŒ Fails silently | âœ… Executes and logs success |
| Check Status | âŒ No info | âœ… Shows position, health, ammo |
| If Not Ready | âŒ Error | âœ… Auto-waits then retries |

---

## Troubleshooting Reference

### "API Not Available"
â†’ Game not loaded yet. Wait 5-10 more seconds. Press "Check API Status" again.

### AI won't activate
â†’ Make sure game is running (not in menu). Click "Quick Play" first.

### Commands don't execute
â†’ Check API Status shows green. Make sure "AI ACTIVE" is highlighted.

### Console shows errors
â†’ Look for [Panel], [AI Bridge], or [World] prefix in error message

---

## Files You'll Use

| File | Purpose |
|------|---------|
| `test_ai_browser.html` | ðŸŽ® Test interface - recommended |
| `run_ai_test.py` | ðŸ¤– Guided automated testing |
| `index.html` | ðŸ•¹ï¸ Main game (open in separate tab) |
| `AI_ACTIVATION_TEST_GUIDE.md` | ðŸ“– Full documentation |

---

## Success Criteria

You'll know it's working when:

âœ… Green "âœ“ API Available" appears immediately after game loads  
âœ… "Activate AI" button makes AI status turn green  
âœ… Clicking movement buttons makes player move  
âœ… Clicking "Get Game State" shows actual position/health/ammo  
âœ… No errors in console  

---

## What Changed

### Code Fixes:
- `js/omni-unified-control-panel.js` - Added waitForAPI() and retry logic
- `js/omni-ai-game-bridge.js` - Added diagnostics and status checking
- `scripts/startup-verify.js` - Added AI system checks

### New Test Tools:
- `test_ai_browser.html` - Interactive web-based test interface
- `run_ai_test.py` - Guided step-by-step testing script
- `test_ai_comprehensive.py` - Detailed system analysis

### Documentation:
- `AI_FIX_SUMMARY.txt` - This quick start guide
- `AI_ACTIVATION_TEST_GUIDE.md` - Comprehensive testing guide

---

## Next Steps

### Right Now (Pick One)
1. Open `test_ai_browser.html` â†’ Click "Check API Status" â†’ Click "Activate AI"
2. Run `python run_ai_test.py` â†’ Follow prompts
3. Press F12 in game â†’ Paste console commands above

### Then
- Use test interface for ongoing AI testing
- Check console messages for debugging
- Refer to `AI_ACTIVATION_TEST_GUIDE.md` if issues arise

### Done!
You now have a fully tested AI control system ready to use.

---

## Quick Command Ref

```javascript
// Most Useful Commands:

// 1. Test if ready (should return true after game loads)
!!window.AIPlayerAPI

// 2. Activate AI control
window.AIPlayerAPI.activateAI()

// 3. Move player forward (0.5 seconds)
window.AIPlayerAPI.setInput('moveForward', true);
setTimeout(() => window.AIPlayerAPI.setInput('moveForward', false), 500);

// 4. Get current game data
window.AIPlayerAPI.getGameState()

// 5. Check if AI is active
window.AIPlayerAPI.isAIControlling()

// 6. Stop AI
window.AIPlayerAPI.deactivateAI()
```

---

**Status:** âœ… Ready to Test  
**Difficulty:** Easy - All automated  
**Time Needed:** 2-5 minutes  
**Success Rate:** Should be 100% if game loads successfully

Start with Option 1 or 2 above! ðŸš€
